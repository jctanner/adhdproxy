{% extends "base.html" %}

{% block title %}Search - YouTube{% endblock %}
{% block nav_youtube %}active{% endblock %}

{% block content %}
<h1>Search Results</h1>

<form id="searchForm" method="GET" action="/youtube/search" style="margin-bottom: 20px;">
    <input type="text" id="searchterm" name="q" placeholder="Search YouTube..." value="{{ query if query else '' }}" style="width: 400px; margin-right: 10px;">
    <select name="per_page" id="per_page" style="margin-right: 10px;">
        <option value="10" {% if per_page == 10 %}selected{% endif %}>10 per page</option>
        <option value="20" {% if per_page == 20 %}selected{% endif %}>20 per page</option>
        <option value="50" {% if per_page == 50 %}selected{% endif %}>50 per page</option>
    </select>
    <input type="submit" value="Search">
</form>

{% if query and (has_prev or has_next) %}
<div style="margin: 10px 0;">
    {% if has_prev %}
    <a href="/youtube/search?q={{ query }}&per_page={{ per_page }}&page={{ page - 1 }}">&lt; Previous</a>
    {% endif %}

    {% if has_next %}
    <a href="/youtube/search?q={{ query }}&per_page={{ per_page }}&page={{ page + 1 }}">Next &gt;</a>
    {% endif %}
</div>
{% endif %}

{% for video in videos %}
    <div style="margin: 8px 0;">
        <a href="/youtube?video={{ video.id }}">{{video.title}}</a>
        {% if video.upload_date %}
            <span style="color: #666; font-size: 0.9em; margin-left: 10px;">
                ({{ video.upload_date[:4] }}-{{ video.upload_date[4:6] }}-{{ video.upload_date[6:8] }})
            </span>
        {% endif %}
    </div>
{% endfor %}

{% if query and (has_prev or has_next) %}
<div style="margin: 10px 0;">
    {% if has_prev %}
    <a href="/youtube/search?q={{ query }}&per_page={{ per_page }}&page={{ page - 1 }}">&lt; Previous</a>
    {% endif %}

    {% if has_next %}
    <a href="/youtube/search?q={{ query }}&per_page={{ per_page }}&page={{ page + 1 }}">Next &gt;</a>
    {% endif %}
</div>
{% endif %}

<p style="margin-top: 20px;">
    <a href="/youtube">‚Üê Back to all cached videos</a>
</p>
{% endblock %}
