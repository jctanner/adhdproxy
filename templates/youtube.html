<!DOCTYPE html>
<html>
<body>
<h1>videos</h1>
<form id="searchForm" method="GET" action="">
    <input type="text" id="searchterm" name="q" placeholder="Enter search term" value="{{ query if query else '' }}"></input>
    <select name="per_page" id="per_page">
        <option value="10" {% if per_page == 10 %}selected{% endif %}>10 per page</option>
        <option value="20" {% if per_page == 20 %}selected{% endif %}>20 per page</option>
        <option value="50" {% if per_page == 50 %}selected{% endif %}>50 per page</option>
    </select>
    <input type="submit" value="Search">
</form>

<div style="margin: 10px 0;">
    <a href="/clear-cache" style="padding: 5px 10px; background: #f44336; color: white; text-decoration: none; font-size: 12px;">Clear Cache (Keep Videos)</a>
</div>

{% if query and (has_prev or has_next) %}
<div style="margin: 10px 0;">
    {% if has_prev %}
    <a href="/youtube?q={{ query }}&per_page={{ per_page }}&page={{ page - 1 }}">&lt; Previous</a>
    {% endif %}

    {% if has_next %}
    <a href="/youtube?q={{ query }}&per_page={{ per_page }}&page={{ page + 1 }}">Next &gt;</a>
    {% endif %}
</div>
{% endif %}

{% for video in videos %}
    <div style="margin: 8px 0;">
        <a href="/youtube?video={{ video.id }}">{{video.title}}</a>
        {% if video.upload_date %}
            <span style="color: #666; font-size: 0.9em; margin-left: 10px;">
                ({{ video.upload_date[:4] }}-{{ video.upload_date[4:6] }}-{{ video.upload_date[6:8] }})
            </span>
        {% endif %}
    </div>
{% endfor %}

{% if query and (has_prev or has_next) %}
<div style="margin: 10px 0;">
    {% if has_prev %}
    <a href="/youtube?q={{ query }}&per_page={{ per_page }}&page={{ page - 1 }}">&lt; Previous</a>
    {% endif %}

    {% if has_next %}
    <a href="/youtube?q={{ query }}&per_page={{ per_page }}&page={{ page + 1 }}">Next &gt;</a>
    {% endif %}
</div>
{% endif %}

</body>
</html>
